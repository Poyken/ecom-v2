
> api@0.0.1 test:e2e
> jest --config ./test/jest-e2e.json test/full-flow.e2e-spec.ts

  console.log
    Product Creation Error: {
      "message": "Product not found",
      "error": "Not Found",
      "statusCode": 404
    }

      at Object.<anonymous> (full-flow.e2e-spec.ts:61:15)

FAIL test/full-flow.e2e-spec.ts
  B2B2C Full Flow (e2e)
    ✓ Step 1: Onboard Tenant (137 ms)
    ✕ Step 2: Setup Catalog and Inventory (62 ms)
    ✕ Step 3: Execute Checkout and IPN (4 ms)

  ● B2B2C Full Flow (e2e) › Step 2: Setup Catalog and Inventory

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 404

      62 |     }
      63 |     
    > 64 |     expect(prodRes.status).toBe(201);
         |                            ^
      65 |
      66 |     skuId = prodRes.body.skus[0].id;
      67 |

      at Object.<anonymous> (full-flow.e2e-spec.ts:64:28)

  ● B2B2C Full Flow (e2e) › Step 3: Execute Checkout and IPN

    expected 201 "Created", got 400 "Bad Request"

      92 |         shippingAddress: { street: '123 Tech Ave', city: 'Sillicon Valley' }
      93 |       })
    > 94 |       .expect(201);
         |        ^
      95 |
      96 |     const orderId = orderRes.body.id;
      97 |

      at Object.<anonymous> (full-flow.e2e-spec.ts:94:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 1 passed, 3 total
Snapshots:   0 total
Time:        1.074 s
Ran all test suites matching test/full-flow.e2e-spec.ts.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
